PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 1000H
LETRAS DB ?
MSJ DB "Inicia el control del sistema"
DB 0AH
FIN DB ?
ENTER DB 0AH

ORG 3000H
strobe0: 
IN AL, PA
AND AL, 11111101b
OUT PA, AL
RET

ORG 3500H
strobe1:
IN AL, PA
OR AL, 00000010b
OUT PA, AL
RET


ORG 2000H
MOV BX, OFFSET MSJ 
MOV AL, OFFSET FIN - OFFSET MSJ
INT 7

MOV BX, OFFSET LETRAS
MOV DL, 0
LOOP: INT 6
      MOV CL, [BX]
      INC BX
      INC DL
      CMP CL, ENTER
JNZ LOOP

;Configuraci√≥n del PIO para impresora
MOV AL, 11111101b
OUT CA, AL
MOV AL, 0
OUT CB, AL
CALL strobe0

MOV BX, OFFSET LETRAS
POLL:
  IN AL, PA
  AND AL, 1
JNZ POLL
  MOV AL, [BX]
  OUT PB, AL
  INC BX
  CALL strobe1
  CALL strobe0
  DEC DL
  CMP DL, 1
JNZ POLL          

INT 0
END